
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IdealQuest — 本質的理想マネージャ</title>
  <meta name="theme-color" content="#0ea5e9" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          boxShadow: {
            'soft': '0 12px 30px -10px rgba(15,23,42,0.35), 0 6px 14px -8px rgba(15,23,42,0.25)',
          },
          animation: {
            'fade-in': 'fadeIn 300ms ease both',
            'slide-up': 'slideUp 260ms ease both',
            'pop': 'pop 220ms ease both',
            'spin-slow': 'spin 5s linear infinite',
          },
          keyframes: {
            fadeIn: { '0%': {opacity: 0}, '100%': {opacity: 1} },
            slideUp: { '0%': {opacity: 0, transform: 'translateY(8px)'}, '100%': {opacity: 1, transform: 'translateY(0)'} },
            pop: { '0%': { transform: 'scale(.98)'}, '100%': { transform: 'scale(1)' } }
          },
          backgroundImage: {
            'radial-dots': 'radial-gradient( rgba(14,165,233,.12) 1px, transparent 1px )',
          },
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="bg-slate-950 text-slate-100 antialiased selection:bg-indigo-500/30" style="font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;">
  <div class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute inset-0 bg-gradient-to-b from-slate-900 via-slate-950 to-black"></div>
    <div class="absolute inset-0 opacity-[0.35]" style="background-image: radial-gradient(1000px 500px at 10% -10%, rgba(56,189,248,.35), transparent), radial-gradient(800px 400px at 100% 0%, rgba(99,102,241,.35), transparent);"></div>
    <div class="absolute inset-0 [background-size:16px_16px] bg-radial-dots opacity-[.25]"></div>
  </div>

  <header class="sticky top-0 z-40 backdrop-blur bg-slate-900/70 border-b border-white/10">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="relative">
          <div class="h-10 w-10 rounded-xl bg-gradient-to-br from-sky-400 via-indigo-500 to-fuchsia-500 shadow-soft animate-pop"></div>
          <div class="absolute -inset-1 rounded-2xl bg-gradient-to-br from-sky-400/20 via-indigo-500/10 to-transparent blur-xl -z-10"></div>
        </div>
        <h1 class="text-xl font-extrabold tracking-tight">IdealQuest</h1>
        <span class="hidden sm:inline-block text-xs px-2 py-1 rounded-full bg-white/5 border border-white/10">最高水準</span>
      </div>
      <div id="authArea" class="flex items-center gap-3"></div>
    </div>
    <nav class="max-w-7xl mx-auto px-2 pb-2">
      <div class="grid grid-cols-3 gap-2">
        <button data-view="ideals" class="tab-btn active"><span class="i i-sparkles"></span>本質的理想</button>
        <button data-view="quests" class="tab-btn"><span class="i i-flag"></span>クエスト</button>
        <button data-view="scenes" class="tab-btn"><span class="i i-checklist"></span>絵になる姿</button>
      </div>
    </nav>
  </header>

  <main class="max-w-7xl mx-auto px-4 py-6 space-y-10">
    <section id="gate" class="hidden">
      <div class="glass card-xl text-center animate-fade-in">
        <h2 class="text-2xl font-extrabold mb-2">サインインしてください</h2>
        <p class="text-slate-300">全端末で同期するため、Googleでログインします。</p>
        <div class="mt-6">
          <button id="btnSignIn" class="btn-primary"><span class="i i-google"></span>Googleでサインイン</button>
        </div>
      </div>
    </section>

    <section id="view-ideals" class="space-y-10">
      <div class="flex items-center justify-between">
        <h2 class="text-xl font-bold">本質的理想</h2>
        <div class="text-sm text-slate-400">100%達成 &amp; 叶った チェックで下部へ</div>
      </div>
      <div id="idealsActive" class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div>
      <div class="pt-2">
        <h3 class="text-lg font-semibold mb-2">実現した理想</h3>
        <div id="idealsRealized" class="grid md:grid-cols-2 lg:grid-cols-3 gap-5"></div>
      </div>
    </section>

    <section id="view-quests" class="hidden space-y-8">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-xl font-bold mb-2">クエスト一覧</h2>
          <p class="text-slate-400 text-sm">数字の横で+/-できます。目標到達で達成へ。</p>
        </div>
        <div class="flex items-center gap-2">
          <button id="btnAddQuestInline" class="btn-ghost"><span class="i i-plus"></span>クエスト追加</button>
        </div>
      </div>
      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold mb-2">進行中</h3>
          <div id="questsActive" class="space-y-3"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">達成済</h3>
          <div id="questsCompleted" class="space-y-3"></div>
        </div>
      </div>
    </section>

    <section id="view-scenes" class="hidden space-y-8">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-xl font-bold mb-2">絵になる姿一覧</h2>
          <p class="text-slate-400 text-sm">毎日チェック。JST 0時で自動リセット。</p>
        </div>
        <div class="flex items-center gap-2">
          <button id="btnAddSceneInline" class="btn-ghost"><span class="i i-plus"></span>追加</button>
        </div>
      </div>
      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold mb-2">今日できた</h3>
          <div id="scenesDone" class="space-y-3"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">未実施</h3>
          <div id="scenesTodo" class="space-y-3"></div>
        </div>
      </div>
    </section>

    <section id="view-ideal-detail" class="hidden space-y-6 animate-fade-in">
      <div class="flex items-center justify-between">
        <button id="btnBackHome" class="btn-ghost"><span class="i i-arrow-left"></span>戻る</button>
        <div class="flex items-center gap-2">
          <button id="btnEditIdeal" class="btn-secondary"><span class="i i-pencil"></span>編集</button>
          <button id="btnDeleteIdeal" class="btn-danger"><span class="i i-trash"></span>削除</button>
        </div>
      </div>
      <div id="idealDetailCard" class="glass card-xl"></div>
      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-semibold">クエスト</h3>
            <button id="btnAddQuestDetail" class="btn-ghost"><span class="i i-plus"></span>追加</button>
          </div>
          <div id="idealDetailQuests" class="space-y-3"></div>
        </div>
        <div>
          <div class="flex items-center justify-between mb-2">
            <h3 class="font-semibold">絵になる姿</h3>
            <button id="btnAddSceneDetail" class="btn-ghost"><span class="i i-plus"></span>追加</button>
          </div>
          <div id="idealDetailScenes" class="space-y-3"></div>
        </div>
      </div>
    </section>
  </main>

  <button id="fabAddIdeal" class="fab hidden" title="理想を追加"><span class="i i-plus"></span></button>

  <dialog id="modalAdd" class="modal">
    <form method="dialog" class="modal-content" id="formAddIdeal">
      <div class="flex items-center justify-between mb-4">
        <h3 id="modalTitle" class="text-lg font-bold">理想を追加</h3>
        <button value="close" class="btn-ghost">✕</button>
      </div>
      <label class="block mb-4">
        <span class="label">タイトル（本質的理想）</span>
        <input id="idealTitle" class="input" placeholder="例: 経済的自由を達成する" required />
      </label>
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="label">その為のクエスト</span>
          <button type="button" id="btnAddQuestRow" class="btn-secondary"><span class="i i-plus"></span>行を追加</button>
        </div>
        <div id="questRows" class="space-y-3"></div>
      </div>
      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="label">絵になる姿（1行メモ）</span>
          <button type="button" id="btnAddSceneRow" class="btn-secondary"><span class="i i-plus"></span>行を追加</button>
        </div>
        <div id="sceneRows" class="space-y-3"></div>
      </div>
      <div class="flex items-center justify-end gap-2">
        <button value="close" class="btn-ghost">キャンセル</button>
        <button id="btnSubmitIdeal" class="btn-primary" type="submit"><span class="i i-check"></span>保存</button>
      </div>
    </form>
  </dialog>

  <div id="toastHost" class="fixed top-4 right-4 z-[100] space-y-2"></div>
  <canvas id="confetti" class="fixed inset-0 pointer-events-none z-[90]"></canvas>
  <script type="module" src="./app.js"></script>
</body>
</html>
