
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>本質的理想 — IdealQuest</title>
  <meta name="theme-color" content="#0ea5e9" />
  <!-- Tailwind Play CDN for modern styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          boxShadow: {
            'soft': '0 10px 25px -5px rgba(0,0,0,0.15), 0 8px 10px -6px rgba(0,0,0,0.1)',
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body class="bg-slate-50 text-slate-900 antialiased" style="font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;">
  <!-- App Shell -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="h-9 w-9 rounded-xl bg-gradient-to-br from-sky-400 to-indigo-500 shadow-soft"></div>
        <h1 class="text-xl font-extrabold tracking-tight">IdealQuest</h1>
      </div>
      <div id="authArea" class="flex items-center gap-3">
        <!-- Auth buttons injected by JS -->
      </div>
    </div>
    <nav class="max-w-6xl mx-auto px-2 pb-2">
      <div class="grid grid-cols-3 gap-2">
        <button data-view="ideals" class="tab-btn active">本質的理想</button>
        <button data-view="quests" class="tab-btn">クエスト一覧</button>
        <button data-view="scenes" class="tab-btn">絵になる姿一覧</button>
      </div>
    </nav>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-6 space-y-8">
    <!-- Gate (when signed out) -->
    <section id="gate" class="hidden">
      <div class="bg-white rounded-2xl p-8 shadow-soft text-center">
        <h2 class="text-2xl font-bold mb-3">サインインしてください</h2>
        <p class="text-slate-600">全端末で同期するため、Googleでログインします。</p>
        <div class="mt-6">
          <button id="btnSignIn" class="btn-primary">Googleでサインイン</button>
        </div>
      </div>
    </section>

    <!-- IDEALS VIEW -->
    <section id="view-ideals" class="space-y-10">
      <div class="flex items-center justify-between">
        <h2 class="text-xl font-bold">本質的理想</h2>
        <div class="text-sm text-slate-500">※100%達成 &amp; 叶った チェックで下に移動</div>
      </div>

      <div id="idealsActive" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

      <div class="pt-4">
        <h3 class="text-lg font-semibold mb-2">実現した理想</h3>
        <div id="idealsRealized" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>
      </div>
    </section>

    <!-- QUESTS VIEW -->
    <section id="view-quests" class="hidden space-y-8">
      <div>
        <h2 class="text-xl font-bold mb-2">クエスト一覧</h2>
        <p class="text-slate-600 text-sm">各本質的理想に紐づく全クエスト。数字の横で+/-できます。</p>
      </div>

      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold mb-2">進行中</h3>
          <div id="questsActive" class="space-y-3"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">達成済</h3>
          <div id="questsCompleted" class="space-y-3"></div>
        </div>
      </div>
    </section>

    <!-- SCENES VIEW -->
    <section id="view-scenes" class="hidden space-y-8">
      <div>
        <h2 class="text-xl font-bold mb-2">絵になる姿一覧</h2>
        <p class="text-slate-600 text-sm">毎日チェック。0時（JST）で自動リセット。</p>
      </div>

      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold mb-2">今日できた</h3>
          <div id="scenesDone" class="space-y-3"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">未実施</h3>
          <div id="scenesTodo" class="space-y-3"></div>
        </div>
      </div>
    </section>

    <!-- IDEAL DETAILS VIEW -->
    <section id="view-ideal-detail" class="hidden space-y-6">
      <button id="btnBackHome" class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900">
        <span class="text-lg">←</span><span>戻る</span>
      </button>

      <div id="idealDetailCard" class="bg-white rounded-2xl p-6 shadow-soft"></div>

      <div class="grid lg:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold mb-2">クエスト</h3>
          <div id="idealDetailQuests" class="space-y-3"></div>
        </div>
        <div>
          <h3 class="font-semibold mb-2">絵になる姿</h3>
          <div id="idealDetailScenes" class="space-y-3"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- FAB -->
  <button id="fabAddIdeal" class="fab hidden">＋</button>

  <!-- Add Ideal Modal -->
  <dialog id="modalAdd" class="modal">
    <form method="dialog" class="modal-content" id="formAddIdeal">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-bold">理想を追加</h3>
        <button value="close" class="btn-ghost">✕</button>
      </div>

      <label class="block mb-4">
        <span class="label">タイトル（本質的理想）</span>
        <input id="idealTitle" class="input" placeholder="例: 経済的自由を達成する" required />
      </label>

      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="label">その為のクエスト</span>
          <button type="button" id="btnAddQuestRow" class="btn-secondary">行を追加</button>
        </div>
        <div id="questRows" class="space-y-3"></div>
      </div>

      <div class="mb-6">
        <div class="flex items-center justify-between mb-2">
          <span class="label">絵になる姿（1行メモ）</span>
          <button type="button" id="btnAddSceneRow" class="btn-secondary">行を追加</button>
        </div>
        <div id="sceneRows" class="space-y-3"></div>
      </div>

      <div class="flex items-center justify-end gap-2">
        <button value="close" class="btn-ghost">キャンセル</button>
        <button id="btnSubmitIdeal" class="btn-primary" type="submit">追加する</button>
      </div>
    </form>
  </dialog>

  <script type="module" src="./app.js"></script>
</body>
</html>
